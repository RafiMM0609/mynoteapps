(()=>{var e={};e.id=681,e.ids=[681],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1098:(e,r,t)=>{"use strict";t.d(r,{HU:()=>u,Lc:()=>c,eF:()=>p,l4:()=>a,th:()=>l});var n=t(3205),s=t.n(n);t(5665);var o=t(1506);let i=process.env.JWT_SECRET||"your-secret-key";function u(e){return s().sign({userId:e},i,{expiresIn:"7d"})}async function a(e){try{let r=function(e){try{return{id:s().verify(e,i).userId,email:""}}catch(e){return null}}(e);if(!r)return null;let{data:t,error:n}=await o.N.from("users").select("id, email").eq("id",r.id).single();if(n||!t)return null;return{id:t.id,email:t.email}}catch(e){return null}}async function c(e,r){try{let t=new Date(Date.now()+6048e5),{error:n}=await o.N.from("auth_tokens").insert([{user_id:e,token:r,expires_at:t.toISOString()}]);return!n}catch(e){return!1}}async function l(e){try{let{data:r,error:t}=await o.N.from("auth_tokens").select("id").eq("token",e).gt("expires_at",new Date().toISOString()).single();return!t&&!!r}catch(e){return!1}}async function p(e){try{let{error:r}=await o.N.from("auth_tokens").delete().eq("token",e);return!r}catch(e){return!1}}},1506:(e,r,t)=>{"use strict";t.d(r,{N:()=>n});let n=(0,t(9398).createClient)("https://livlimcygmeebknjkbuq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxpdmxpbWN5Z21lZWJrbmprYnVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzIxODMyMzQsImV4cCI6MjA0Nzc1OTIzNH0.vNUVvjDmf4XW-lv5GJR80ImcQvEHr8h5j3fSFBB8n6A")},1630:e=>{"use strict";e.exports=require("http")},1645:e=>{"use strict";e.exports=require("net")},1906:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=1906,e.exports=r},1997:e=>{"use strict";e.exports=require("punycode")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4075:e=>{"use strict";e.exports=require("zlib")},4631:e=>{"use strict";e.exports=require("tls")},4735:e=>{"use strict";e.exports=require("events")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5431:(e,r,t)=>{"use strict";t.d(r,{Iy:()=>a,p4:()=>i,t0:()=>s,vW:()=>o,w3:()=>u});var n=t(1506);async function s(e){try{let{data:r,error:t}=await n.N.from("notes").select("*").eq("user_id",e).order("updated_at",{ascending:!1});if(t)return console.error("Error fetching notes:",t),[];return r||[]}catch(e){return console.error("Error fetching notes:",e),[]}}async function o(e,r){try{let{data:t,error:s}=await n.N.from("notes").select("*").eq("id",e).eq("user_id",r).single();if(s)return console.error("Error fetching note:",s),null;return t}catch(e){return console.error("Error fetching note:",e),null}}async function i(e,r){try{let{data:t,error:s}=await n.N.from("notes").insert([{user_id:e,title:r.title,content:r.content||""}]).select().single();if(s)return console.error("Error creating note:",s),null;return t}catch(e){return console.error("Error creating note:",e),null}}async function u(e,r,t){try{let{data:s,error:o}=await n.N.from("notes").update({...t,updated_at:new Date().toISOString()}).eq("id",e).eq("user_id",r).select().single();if(o)return console.error("Error updating note:",o),null;return s}catch(e){return console.error("Error updating note:",e),null}}async function a(e,r){try{let{error:t}=await n.N.from("notes").delete().eq("id",e).eq("user_id",r);if(t)return console.error("Error deleting note:",t),!1;return!0}catch(e){return console.error("Error deleting note:",e),!1}}},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},6487:()=>{},7910:e=>{"use strict";e.exports=require("stream")},7990:()=>{},8063:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>f,serverHooks:()=>h,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>y});var n={};t.r(n),t.d(n,{GET:()=>p,POST:()=>d});var s=t(6559),o=t(8088),i=t(7719),u=t(2190),a=t(1098),c=t(5431);async function l(e){let r=e.headers.get("authorization");if(!r||!r.startsWith("Bearer "))return null;let t=r.substring(7);return await (0,a.l4)(t)}async function p(e){try{let r=await l(e);if(!r)return u.NextResponse.json({error:"Unauthorized"},{status:401});let t=await (0,c.t0)(r.id);return u.NextResponse.json(t)}catch(e){return console.error("Get notes error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}async function d(e){try{let r=await l(e);if(!r)return u.NextResponse.json({error:"Unauthorized"},{status:401});let{title:t,content:n}=await e.json();if(!t)return u.NextResponse.json({error:"Title is required"},{status:400});let s=await (0,c.p4)(r.id,{title:t,content:n});if(!s)return u.NextResponse.json({error:"Failed to create note"},{status:500});return u.NextResponse.json(s,{status:201})}catch(e){return console.error("Create note error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}let f=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/notes/route",pathname:"/api/notes",filename:"route",bundlePath:"app/api/notes/route"},resolvedPagePath:"D:\\Frontend\\newnote\\app\\api\\notes\\route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:x,workUnitAsyncStorage:y,serverHooks:h}=f;function m(){return(0,i.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:y})}},8335:()=>{},8354:e=>{"use strict";e.exports=require("util")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},9551:e=>{"use strict";e.exports=require("url")},9727:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[447,223],()=>t(8063));module.exports=n})();