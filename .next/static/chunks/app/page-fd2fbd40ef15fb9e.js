(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{934:(e,t,s)=>{Promise.resolve().then(s.bind(s,6854))},6854:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>H});var r=s(5155),a=s(2115),n=s(6865),i=s(4760),l=s(7695),o=s(5628),c=s(4500);let d={success:n.A,error:i.A,info:l.A,warning:o.A},m={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",info:"bg-blue-50 border-blue-200 text-blue-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800"};function u(e){let{toast:t,onRemove:s}=e,n=d[t.type];return(0,a.useEffect)(()=>{if(t.duration&&t.duration>0){let e=setTimeout(()=>{s(t.id)},t.duration);return()=>clearTimeout(e)}},[t.id,t.duration,s]),(0,r.jsx)("div",{className:"\n      max-w-sm w-full shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden\n      ".concat(m[t.type],"\n      animate-fade-in\n    "),children:(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(n,{className:"h-6 w-6","aria-hidden":"true"})}),(0,r.jsx)("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:(0,r.jsx)("p",{className:"text-sm font-medium",children:t.message})}),(0,r.jsx)("div",{className:"ml-4 flex-shrink-0 flex",children:(0,r.jsxs)("button",{className:"rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>s(t.id),children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)(c.A,{className:"h-5 w-5","aria-hidden":"true"})]})})]})})})}function x(e){let{toasts:t,onRemove:s}=e;return(0,r.jsx)("div",{"aria-live":"assertive",className:"fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start z-50",children:(0,r.jsx)("div",{className:"w-full flex flex-col items-center space-y-4 sm:items-end",children:t.map(e=>(0,r.jsx)(u,{toast:e,onRemove:s},e.id))})})}var h=s(8987),g=s(184);function f(e){let{onLogin:t,onSwitchToRegister:s,isLoading:n}=e,[i,l]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)({}),f=()=>{let e={};return i?/\S+@\S+\.\S+/.test(i)||(e.email="Email is invalid"):e.email="Email is required",o?o.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",x(e),0===Object.keys(e).length},p=async e=>{if(e.preventDefault(),f())try{await t(i,o)}catch(e){console.error("Login failed:",e)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),(0,r.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,r.jsx)("button",{type:"button",onClick:s,className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"create a new account"})]})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:p,children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,r.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:e=>l(e.target.value),className:"mt-1 input-field ".concat(u.email?"border-red-300 focus:ring-red-500 focus:border-red-500":""),placeholder:"Enter your email"}),u.email&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:u.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("input",{id:"password",name:"password",type:d?"text":"password",autoComplete:"current-password",required:!0,value:o,onChange:e=>c(e.target.value),className:"input-field pr-10 ".concat(u.password?"border-red-300 focus:ring-red-500 focus:border-red-500":""),placeholder:"Enter your password"}),(0,r.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!d),children:d?(0,r.jsx)(h.A,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(g.A,{className:"h-5 w-5 text-gray-400"})})]}),u.password&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:u.password})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:n?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})})]})]})})}function p(e){let{onRegister:t,onSwitchToLogin:s,isLoading:n}=e,[i,l]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[u,x]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[b,y]=(0,a.useState)({}),j=()=>{let e={};return i?/\S+@\S+\.\S+/.test(i)||(e.email="Email is invalid"):e.email="Email is required",o?o.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",d?o!==d&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",y(e),0===Object.keys(e).length},w=async e=>{if(e.preventDefault(),j())try{await t(i,o)}catch(e){console.error("Registration failed:",e)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),(0,r.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,r.jsx)("button",{type:"button",onClick:s,className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"sign in to your existing account"})]})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:w,children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,r.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:e=>l(e.target.value),className:"mt-1 input-field ".concat(b.email?"border-red-300 focus:ring-red-500 focus:border-red-500":""),placeholder:"Enter your email"}),b.email&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("input",{id:"password",name:"password",type:u?"text":"password",autoComplete:"new-password",required:!0,value:o,onChange:e=>c(e.target.value),className:"input-field pr-10 ".concat(b.password?"border-red-300 focus:ring-red-500 focus:border-red-500":""),placeholder:"Enter your password"}),(0,r.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>x(!u),children:u?(0,r.jsx)(h.A,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(g.A,{className:"h-5 w-5 text-gray-400"})})]}),b.password&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.password})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:f?"text":"password",autoComplete:"new-password",required:!0,value:d,onChange:e=>m(e.target.value),className:"input-field pr-10 ".concat(b.confirmPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":""),placeholder:"Confirm your password"}),(0,r.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>p(!f),children:f?(0,r.jsx)(h.A,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(g.A,{className:"h-5 w-5 text-gray-400"})})]}),b.confirmPassword&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.confirmPassword})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:n?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating account..."]}):"Create account"})})]})]})})}var b=s(7765),y=s(9598),j=s(2975),w=s(1151);function v(e){let{notes:t,selectedNote:s,onSelectNote:a,onDeleteNote:n}=e,i=e=>{let t=new Date(e),s=(new Date().getTime()-t.getTime())/36e5;return s<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):s<168?t.toLocaleDateString([],{weekday:"short"}):t.toLocaleDateString([],{month:"short",day:"numeric"})},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?e:e.substring(0,t)+"..."};return 0===t.length?(0,r.jsxs)("div",{className:"p-4 text-center",children:[(0,r.jsx)(j.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No notes yet"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Create your first note to get started"})]}):(0,r.jsx)("div",{className:"h-full overflow-y-auto custom-scrollbar",children:(0,r.jsx)("div",{className:"p-2",children:t.map(e=>(0,r.jsx)("div",{className:"\n              group relative p-3 mb-2 rounded-lg cursor-pointer transition-colors duration-150\n              ".concat((null==s?void 0:s.id)===e.id?"bg-blue-50 border border-blue-200":"bg-gray-50 hover:bg-gray-100 border border-transparent","\n            "),onClick:()=>a(e),children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.title||"Untitled"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:i(e.updated_at)}),e.content&&(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2 leading-relaxed",children:l(e.content)})]}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),n(e.id)},className:"opacity-0 group-hover:opacity-100 ml-2 p-1 text-gray-400 hover:text-red-500 transition-all duration-150",title:"Delete note",children:(0,r.jsx)(w.A,{className:"h-4 w-4"})})]})},e.id))})})}var N=s(2175),k=s(9337),C=s(8947),S=s(822),A=s(4445),E=s(8978),L=s(8853),T=s(5441),I=s(8030),P=s(276),D=s(8673),_=s(6124),O=s(8846);function B(e){let{isVisible:t,position:s,onSelect:n,onClose:i,searchQuery:l}=e,[o,c]=(0,a.useState)(0),d=(0,a.useRef)(null),m=[{id:"heading1",label:"Heading 1",description:"Large section heading",icon:A.A,shortcut:"H1",action:()=>({before:"# ",after:""})},{id:"heading2",label:"Heading 2",description:"Medium section heading",icon:A.A,shortcut:"H2",action:()=>({before:"## ",after:""})},{id:"heading3",label:"Heading 3",description:"Small section heading",icon:A.A,shortcut:"H3",action:()=>({before:"### ",after:""})},{id:"bold",label:"Bold",description:"Make text bold",icon:E.A,shortcut:"Ctrl+B",action:()=>({before:"**",after:"**"})},{id:"italic",label:"Italic",description:"Make text italic",icon:L.A,shortcut:"Ctrl+I",action:()=>({before:"*",after:"*"})},{id:"bulletlist",label:"Bullet List",description:"Create a bulleted list",icon:T.A,action:()=>({before:"- ",after:""})},{id:"numberlist",label:"Numbered List",description:"Create a numbered list",icon:T.A,action:()=>({before:"1. ",after:""})},{id:"code",label:"Inline Code",description:"Inline code formatting",icon:I.A,action:()=>({before:"`",after:"`"})},{id:"codeblock",label:"Code Block",description:"Multi-line code block",icon:I.A,action:()=>({before:"```\n",after:"\n```"})},{id:"quote",label:"Quote",description:"Create a blockquote",icon:P.A,action:()=>({before:"> ",after:""})},{id:"link",label:"Link",description:"Insert a link",icon:D.A,action:()=>({before:"[",after:"](url)"})},{id:"table",label:"Table",description:"Insert a table",icon:_.A,action:()=>({before:"| Column 1 | Column 2 |\n|----------|----------|\n| Cell 1   | Cell 2   |\n",after:""})},{id:"checkbox",label:"Checkbox",description:"Create a task list item",icon:k.A,action:()=>({before:"- [ ] ",after:""})},{id:"image",label:"Image",description:"Insert an image",icon:O.A,action:()=>({before:"![alt text](",after:")"})},{id:"divider",label:"Divider",description:"Insert a horizontal line",icon:()=>(0,r.jsx)("div",{className:"w-4 h-0.5 bg-current"}),action:()=>({before:"---\n",after:""})}].filter(e=>e.label.toLowerCase().includes(l.toLowerCase())||e.description.toLowerCase().includes(l.toLowerCase()));return((0,a.useEffect)(()=>{c(0)},[m]),(0,a.useEffect)(()=>{let e=e=>{if(t)switch(e.key){case"ArrowDown":e.preventDefault(),c(e=>e<m.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),c(e=>e>0?e-1:m.length-1);break;case"Enter":e.preventDefault(),m[o]&&n(m[o]);break;case"Escape":e.preventDefault(),i()}},s=()=>{t&&i()};return document.addEventListener("keydown",e),window.addEventListener("resize",s),()=>{document.removeEventListener("keydown",e),window.removeEventListener("resize",s)}},[t,o,m,n,i]),(0,a.useEffect)(()=>{if(d.current&&o>=0){let e=d.current.querySelectorAll("button")[o];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[o]),t&&0!==m.length)?(0,r.jsxs)("div",{ref:d,className:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg max-h-80 overflow-y-auto min-w-80 slash-dropdown slash-dropdown-enter custom-scrollbar",style:{top:Math.max(10,Math.min(s.top,window.innerHeight-320)),left:Math.max(10,Math.min(s.left,window.innerWidth-320))},children:[(0,r.jsx)("div",{className:"px-3 py-2 bg-gray-50 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,r.jsx)("span",{className:"font-medium",children:"Slash Commands"}),(0,r.jsx)("span",{className:"ml-auto",children:"↑↓ Navigate • Enter Select • Esc Close"})]})}),(0,r.jsx)("div",{className:"py-1",children:m.map((e,t)=>{let s=e.icon;return(0,r.jsxs)("button",{onClick:()=>n(e),className:"w-full px-3 py-2.5 text-left hover:bg-gray-50 focus:outline-none focus:bg-gray-50 transition-colors duration-150 ".concat(t===o?"bg-blue-50 border-r-2 border-blue-500":""),type:"button",children:["                ",(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-md flex items-center justify-center transition-colors duration-150 ".concat(t===o?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"),children:(0,r.jsx)(s,{className:"w-4 h-4"})}),"                  ",(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h4",{className:"text-sm font-medium transition-colors duration-150 ".concat(t===o?"text-blue-900":"text-gray-900"),children:e.label}),e.shortcut&&(0,r.jsx)("span",{className:"text-xs text-gray-400 font-mono bg-gray-100 px-1.5 py-0.5 rounded flex-shrink-0 ml-2",children:e.shortcut})]}),(0,r.jsx)("p",{className:"text-xs mt-0.5 transition-colors duration-150 ".concat(t===o?"text-blue-700":"text-gray-500"),children:e.description})]})]})]},e.id)})}),(0,r.jsx)("div",{className:"px-3 py-2 bg-gray-50 border-t border-gray-100",children:(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 Tip: Type to search commands, or use keyboard shortcuts"})})]}):null}function F(e){let{note:t,onSave:s,onCancel:n}=e,[i,l]=(0,a.useState)(t.title),[o,d]=(0,a.useState)(t.content),[m,u]=(0,a.useState)("edit"),[x,h]=(0,a.useState)(!1),f=(0,a.useRef)(null),[p,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)({top:0,left:0}),[w,v]=(0,a.useState)(""),[A,E]=(0,a.useState)(0);(0,a.useEffect)(()=>{h(i!==t.title||o!==t.content)},[i,o,t.title,t.content]),(0,a.useEffect)(()=>{let e=e=>{p&&f.current&&!f.current.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[p]);let L=()=>{s(t.id,i,o),h(!1)},T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=f.current;if(!s)return;let r=s.selectionStart,a=s.selectionEnd,n=o.substring(r,a);d(o.substring(0,r)+e+n+t+o.substring(a)),setTimeout(()=>{s.focus();let t=r+e.length+n.length;s.setSelectionRange(t,t)},0)},I=(e,t)=>{let s=o.substring(0,t).split("\n"),r=s.length-1,a=s[s.length-1].length,n=e.getBoundingClientRect(),i=e.scrollTop,l=e.scrollLeft;return{top:n.top+20*r+20+25-i,left:Math.min(n.left+8*a+10-l,window.innerWidth-320)}},P=(e,t)=>{let s=e.substring(0,t),r=s.lastIndexOf("/");if(-1===r)return void b(!1);let a=r>0?s[r-1]:"\n";if("\n"!==a&&" "!==a&&"	"!==a)return void b(!1);let n=s.substring(r+1);if(n.includes(" "))return void b(!1);v(n),E(r),f.current&&(j(I(f.current,t)),b(!0))};return(0,r.jsxs)("div",{className:"h-full flex flex-col bg-white",children:[(0,r.jsx)(B,{isVisible:p,position:y,onSelect:e=>{let t=f.current;if(!t)return;let{before:s,after:r}=e.action();d(o.substring(0,A)+s+r+o.substring(t.selectionStart)),setTimeout(()=>{t.focus();let e=A+s.length;t.setSelectionRange(e,e)},0),b(!1),v("")},onClose:()=>b(!1),searchQuery:w}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,r.jsx)("div",{className:"flex-1 min-w-0 mr-4",children:(0,r.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),className:"w-full text-xl font-semibold text-gray-900 border-none focus:outline-none bg-transparent",placeholder:"Note title..."})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,r.jsxs)("button",{onClick:()=>u("edit"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat("edit"===m?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,r.jsx)(N.A,{className:"h-4 w-4 mr-1 inline"}),"Edit"]}),(0,r.jsxs)("button",{onClick:()=>u("preview"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat("preview"===m?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,r.jsx)(g.A,{className:"h-4 w-4 mr-1 inline"}),"Preview"]}),(0,r.jsx)("button",{onClick:()=>u("split"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat("split"===m?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Split"})]}),(0,r.jsxs)("button",{onClick:()=>{(!x||confirm("Are you sure you want to discard your changes?"))&&n()},className:"btn-secondary",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"Cancel"]}),(0,r.jsxs)("button",{onClick:L,disabled:!x,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)(k.A,{className:"h-4 w-4 mr-1"}),"Save"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 p-2 border-b border-gray-200 bg-gray-50",children:[(0,r.jsx)("button",{onClick:()=>T("**","**"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded transition-colors",title:"Bold (Ctrl+B)",children:(0,r.jsx)("strong",{children:"B"})}),(0,r.jsx)("button",{onClick:()=>T("*","*"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded transition-colors italic",title:"Italic (Ctrl+I)",children:"I"}),(0,r.jsx)("div",{className:"w-px h-6 bg-gray-300 mx-1"}),(0,r.jsx)("button",{onClick:()=>T("# "),className:"px-2 py-1 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded transition-colors",title:"Heading 1",children:"H1"}),(0,r.jsx)("button",{onClick:()=>T("## "),className:"px-2 py-1 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded transition-colors",title:"Heading 2",children:"H2"}),(0,r.jsx)("button",{onClick:()=>T("- "),className:"px-2 py-1 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded transition-colors",title:"Bullet List",children:"•"}),(0,r.jsx)("button",{onClick:()=>T("`","`"),className:"px-2 py-1 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded transition-colors font-mono",title:"Inline Code",children:"</>"}),(0,r.jsx)("button",{onClick:()=>T("```\n","\n```"),className:"px-2 py-1 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded transition-colors",title:"Code Block",children:"Code"})]}),(0,r.jsxs)("div",{className:"flex-1 flex",children:[("edit"===m||"split"===m)&&(0,r.jsxs)("div",{className:"".concat("split"===m?"w-1/2 border-r border-gray-200":"w-full"),children:["            ",(0,r.jsx)("textarea",{ref:f,value:o,onChange:e=>{let t=e.target.value,s=e.target.selectionStart;d(t),P(t,s)},onKeyDown:e=>{if(!(p&&["ArrowDown","ArrowUp","Enter","Escape"].includes(e.key))){if(e.ctrlKey||e.metaKey)switch(e.key){case"s":e.preventDefault(),L();break;case"b":e.preventDefault(),T("**","**");break;case"i":e.preventDefault(),T("*","*")}p&&!["ArrowDown","ArrowUp","Enter","Escape"].includes(e.key)&&"Backspace"===e.key&&e.target.selectionStart<=A&&b(!1)}},className:"editor-textarea h-full resize-none",placeholder:"Start writing your note... (Type '/' for commands)"})]}),("preview"===m||"split"===m)&&(0,r.jsx)("div",{className:"".concat("split"===m?"w-1/2":"w-full"," overflow-auto"),children:(0,r.jsx)("div",{className:"p-6",children:o?(0,r.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:(e=>{try{let t=(0,C.xI)(e);return S.A.sanitize(t)}catch(t){return console.error("Error rendering markdown:",t),e}})(o)}}):(0,r.jsx)("p",{className:"text-gray-500 italic",children:"Nothing to preview yet..."})})})]}),"      ",(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{children:[o.length," characters"]}),(0,r.jsxs)("span",{children:[o.split(/\s+/).filter(e=>e.length>0).length," words"]}),(0,r.jsx)("span",{className:"text-blue-600",children:'• Type "/" for commands'})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[x&&(0,r.jsx)("span",{className:"text-orange-600",children:"• Unsaved changes"}),(0,r.jsx)("span",{children:"Ctrl+S to save"})]})]})]})}var M=s(1316);function z(e){let{note:t,onEdit:s}=e,[n,i]=(0,a.useState)("preview");return(0,r.jsxs)("div",{className:"h-full flex flex-col bg-white",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900 truncate",children:t.title||"Untitled"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",new Date(t.updated_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,r.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,r.jsxs)("button",{onClick:()=>i("preview"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat("preview"===n?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,r.jsx)(g.A,{className:"h-4 w-4 mr-1 inline"}),"Preview"]}),(0,r.jsx)("button",{onClick:()=>i("raw"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat("raw"===n?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Raw"})]}),(0,r.jsxs)("button",{onClick:s,className:"btn-primary",title:"Edit Note",children:[(0,r.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:t.content?(0,r.jsx)("div",{className:"p-6",children:"preview"===n?(0,r.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:(e=>{try{let t=(0,C.xI)(e);return S.A.sanitize(t)}catch(t){return console.error("Error rendering markdown:",t),e}})(t.content)}}):(0,r.jsx)("pre",{className:"whitespace-pre-wrap font-mono text-sm text-gray-700 leading-relaxed",children:t.content})}):(0,r.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"This note is empty"}),(0,r.jsxs)("button",{onClick:s,className:"btn-primary",children:[(0,r.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"Start writing"]})]})})})]})}function R(e){let{user:t,onLogout:s,showToast:n}=e,[i,l]=(0,a.useState)([]),[o,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=localStorage.getItem("auth_token"),t=await fetch("/api/notes",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();l(e)}else n("Failed to load notes","error")}catch(e){n("Failed to load notes","error")}finally{f(!1)}},j=async()=>{try{let e=localStorage.getItem("auth_token"),t=await fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({title:"Untitled Note",content:""})});if(t.ok){let e=await t.json();l(t=>[e,...t]),d(e),u(!0),n("New note created","success")}else n("Failed to create note","error")}catch(e){n("Failed to create note","error")}},w=async(e,t,s)=>{try{let r=localStorage.getItem("auth_token"),a=await fetch("/api/notes/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({title:t,content:s})});if(a.ok){let t=await a.json();l(s=>s.map(s=>s.id===e?t:s)),d(t),n("Note saved","success")}else n("Failed to save note","error")}catch(e){n("Failed to save note","error")}},N=async e=>{if(confirm("Are you sure you want to delete this note?"))try{let t=localStorage.getItem("auth_token");(await fetch("/api/notes/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok?(l(t=>t.filter(t=>t.id!==e)),(null==o?void 0:o.id)===e&&(d(null),u(!1)),n("Note deleted","success")):n("Failed to delete note","error")}catch(e){n("Failed to delete note","error")}};return g?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Loading notes..."})]})}):(0,r.jsxs)("div",{className:"h-screen flex bg-gray-50",children:[x&&(0,r.jsx)("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>h(!1),children:(0,r.jsx)("div",{className:"absolute inset-0 bg-black opacity-50"})}),(0,r.jsx)("div",{className:"\n        fixed inset-y-0 left-0 z-50 w-80 bg-white shadow-lg transform transition-transform duration-200 ease-in-out lg:relative lg:translate-x-0\n        ".concat(x?"translate-x-0":"-translate-x-full","\n      "),children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,r.jsx)("div",{className:"flex items-center space-x-3",children:(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"MyNotes"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:j,className:"btn-primary p-2",title:"New Note (Ctrl+N)",children:(0,r.jsx)(b.A,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:()=>h(!1),className:"lg:hidden p-2 text-gray-500 hover:text-gray-700",children:(0,r.jsx)(c.A,{className:"h-5 w-5"})})]})]}),(0,r.jsx)("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Signed in as"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.email})]}),(0,r.jsx)("button",{onClick:s,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Sign out"})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,r.jsx)(v,{notes:i,selectedNote:o,onSelectNote:e=>{d(e),u(!1),h(!1)},onDeleteNote:N})})]})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,r.jsxs)("div",{className:"lg:hidden flex items-center justify-between p-4 bg-white border-b border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>h(!0),className:"p-2 text-gray-500 hover:text-gray-700",children:(0,r.jsx)(y.A,{className:"h-6 w-6"})}),(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"MyNotes"}),(0,r.jsx)("div",{className:"w-10"})," "]}),(0,r.jsx)("div",{className:"flex-1",children:o?m?(0,r.jsx)(F,{note:o,onSave:w,onCancel:()=>u(!1)}):(0,r.jsx)(z,{note:o,onEdit:()=>u(!0)}):(0,r.jsx)("div",{className:"h-full flex items-center justify-center bg-white",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-medium text-gray-900 mb-4",children:"Welcome to MyNotes"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Select a note to view or create a new one to get started."}),(0,r.jsxs)("button",{onClick:j,className:"btn-primary",children:[(0,r.jsx)(b.A,{className:"h-5 w-5 mr-2"}),"Create your first note"]})]})})})]})]})}function H(){let[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(!0),[i,l]=(0,a.useState)("login"),[o,c]=(0,a.useState)(!1),{toasts:d,showToast:m,removeToast:u}=function(){let[e,t]=(0,a.useState)([]),s=(0,a.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,a=Math.random().toString(36).substr(2,9),n={id:a,message:e,type:s,duration:r};t(e=>[...e,n]),r>0&&setTimeout(()=>{t(e=>e.filter(e=>e.id!==a))},r)},[]);return{toasts:e,showToast:s,removeToast:(0,a.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),clearAllToasts:(0,a.useCallback)(()=>{t([])},[])}}();(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("auth_token");if(e){let s=await fetch("/api/auth/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})});if(s.ok){let e=await s.json();t(e.user)}else localStorage.removeItem("auth_token")}}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("auth_token")}finally{n(!1)}})()},[]);let h=async(e,s)=>{c(!0);try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s})}),a=await r.json();r.ok?(localStorage.setItem("auth_token",a.token),t(a.user),m("Login successful!","success")):m(a.error||"Login failed","error")}catch(e){m("Login failed. Please try again.","error")}finally{c(!1)}},g=async(e,s)=>{c(!0);try{let r=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s})}),a=await r.json();r.ok?(localStorage.setItem("auth_token",a.token),t(a.user),m("Account created successfully!","success")):m(a.error||"Registration failed","error")}catch(e){m("Registration failed. Please try again.","error")}finally{c(!1)}},b=async()=>{try{let e=localStorage.getItem("auth_token");e&&await fetch("/api/auth/verify",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})})}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("auth_token"),t(null),m("Logged out successfully","info")}};return s?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Loading..."})]})}):e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{user:e,onLogout:b,showToast:m}),(0,r.jsx)(x,{toasts:d,onRemove:u})]}):(0,r.jsxs)(r.Fragment,{children:["login"===i?(0,r.jsx)(f,{onLogin:h,onSwitchToRegister:()=>l("register"),isLoading:o}):(0,r.jsx)(p,{onRegister:g,onSwitchToLogin:()=>l("login"),isLoading:o}),(0,r.jsx)(x,{toasts:d,onRemove:u})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[592,441,684,358],()=>t(934)),_N_E=e.O()}]);